<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.acorn.anpa.mapper.UserMapper">

    <!-- 로그인 -->
    <select id="login" parameterType="Member" resultType="Member">
        SELECT * 
        FROM member 
        WHERE user_id = #{userId} 
        AND password = #{password}
    </select>

    <!-- 회원 가입 -->
    <insert id="signUp" parameterType="Member">
        INSERT INTO member(
             user_id, 
             password, 
             user_name, 
             email, 
             email_yn, 
             admin_yn, 
             sub_city, 
             tel
             )VALUES(
             #{userId}, 
             #{password}, 
             #{userName}, 
             #{email}, 
             #{emailYn}, 
             #{adminYn}, 
             #{subCity}, 
             #{tel}
             )
    </insert>

    <!-- ID 중복 체크 -->
    <select id="idCheck" parameterType="Member" resultType="int">
        SELECT COUNT(*) 
        FROM member 
        WHERE user_id = #{userId}
    </select>

    <!-- 아이디 찾기 -->
    <select id="findUserId" parameterType="Member" resultType="String">
        SELECT user_id 
        FROM member 
        WHERE user_name = #{userName} 
        AND email = #{email}
    </select>

    <!-- 비밀번호 찾기 -->
    <select id="findPassword" parameterType="Member" resultType="String">
        SELECT password 
        FROM member 
        WHERE user_id = #{userId} 
        AND user_name = #{userName} 
        AND email = #{email}
    </select>
    
    <!-- 모든 데이터 삭제 (테스트 용도) -->
    <delete id="deleteAll">
        DELETE FROM member
    </delete>

</mapper>